function save(){var e={locale:document.getElementById("starheart-language").selectedIndex,replaceStrings:{twitter:document.getElementById("twitter-txt").checked,tweetdeck:document.getElementById("tweetdeck-txt").checked},tdRefreshRate:document.getElementById("tweetdeck-refresh-rate").value,addStars:{twitter:document.getElementById("twitter-addstars").checked,tweetdeck:document.getElementById("tweetdeck-addstars").checked},hideRetweets:{twitter:document.getElementById("hide-retweets-twitter").checked,tweetdeck:document.getElementById("hide-retweets-tweetdeck").checked},roundIcons:{twitter:document.getElementById("round-icons-twitter").checked,tweetdeck:document.getElementById("round-icons-tweetdeck").checked},removeMoments:document.getElementById("remove-moments").checked,removeWhoToFollow:document.getElementById("remove-who-to-follow").checked,removeTrends:document.getElementById("remove-trends").checked};chrome.storage.sync.set({StarHeartPrefs:e},function(){console.log("StarHeart preferences saved successfully")}),load(),applyLang()}function load(){chrome.storage.sync.get({StarHeartPrefs:defaults},function(e){var t=document.getElementById("tweetdeck-refresh-counter"),d=["tdrrc-red","tdrrc-orange","tdrrc-yellow","tdrrc-green"];document.getElementById("starheart-language").options[e.StarHeartPrefs.locale].selected=!0,document.getElementById("twitter-txt").checked=e.StarHeartPrefs.replaceStrings.twitter,document.getElementById("tweetdeck-txt").checked=e.StarHeartPrefs.replaceStrings.tweetdeck,document.getElementById("tweetdeck-refresh-rate").disabled=e.StarHeartPrefs.replaceStrings.tweetdeck?!1:!0,document.getElementById("tweetdeck-refresh-wrap").className=document.getElementById("tweetdeck-refresh-rate").disabled?"tweetdeck-refresh-disabled":"",document.getElementById("tweetdeck-refresh-rate").value=e.StarHeartPrefs.tdRefreshRate,document.getElementById("tweetdeck-refresh-counter").firstChild.nodeValue=""+e.StarHeartPrefs.tdRefreshRate+(1==e.StarHeartPrefs.tdRefreshRate?" Second":" Seconds"),e.StarHeartPrefs.tdRefreshRate>=7?t.className=d[3]:e.StarHeartPrefs.tdRefreshRate<=4?t.className=d[0]:t.className=d[2],document.getElementById("twitter-addstars").checked=e.StarHeartPrefs.addStars.twitter,document.getElementById("tweetdeck-addstars").checked=e.StarHeartPrefs.addStars.tweetdeck,document.getElementById("hide-retweets-twitter").checked=e.StarHeartPrefs.hideRetweets.twitter,document.getElementById("hide-retweets-tweetdeck").checked=e.StarHeartPrefs.hideRetweets.tweetdeck,document.getElementById("round-icons-twitter").checked=e.StarHeartPrefs.roundIcons.twitter,document.getElementById("round-icons-tweetdeck").checked=e.StarHeartPrefs.roundIcons.tweetdeck,document.getElementById("remove-moments").checked=e.StarHeartPrefs.removeMoments,document.getElementById("remove-who-to-follow").checked=e.StarHeartPrefs.removeWhoToFollow,document.getElementById("remove-trends").checked=e.StarHeartPrefs.removeTrends,applyLang()})}function isConfigPage(){return null!=document.getElementById("sh-options-identifier")?!0:!1}function resetConfirmation(){var e=document.getElementById("starheart-language"),t=e.options[e.selectedIndex].value;window.confirm(config_locale.popup[t][1])?resetstarheart():console.log("StarHeart: Reset aborted.")}function resetstarheart(){var e={locale:document.getElementById("starheart-language").selectedIndex,replaceStrings:{twitter:defaults.replaceStrings.twitter,tweetdeck:defaults.replaceStrings.tweetdeck},tdRefreshRate:defaults.tdRefreshRate,addStars:{twitter:defaults.addStars.twitter,tweetdeck:defaults.addStars.tweetdeck},hideRetweets:{twitter:defaults.hideRetweets.twitter,tweetdeck:defaults.hideRetweets.tweetdeck},roundIcons:{twitter:defaults.roundIcons.twitter,tweetdeck:defaults.roundIcons.tweetdeck},removeMoments:defaults.removeMoments,removeWhoToFollow:defaults.removeWhoToFollow,removeTrends:defaults.removeTrends};chrome.storage.sync.set({StarHeartPrefs:e},function(){console.log("StarHeart preferences successfully reset")}),load(),applyLang()}function tdRefreshChange(){save(),document.getElementById("tweetdeck-refresh-counter").firstChild.nodeValue=document.getElementById("tweetdeck-refresh-rate").value}function tdRefreshLoad(){var e=document.getElementById("tweetdeck-refresh-rate").value,t=document.getElementById("tweetdeck-refresh-counter"),d="000";switch(e){case 0:d="ff0";break;case 1:d="ff3300";break;case 2:d="ff6600";break;case 3:d="33cc33";break;default:d="33cc33"}t.style.color=d}var defaults={locale:0,replaceStrings:{twitter:!1,tweetdeck:!1},tdRefreshRate:10,addStars:{twitter:!0,tweetdeck:!0},hideRetweets:{twitter:!1,tweetdeck:!1},roundIcons:{twitter:!1,tweetdeck:!1},removeMoments:!1,removeWhoToFollow:!1,removeTrends:!1};chrome.storage.sync.get({StarHeartPrefs:defaults},function(e){isConfigPage()?console.log("StarHeart: On Config Page. Skipping init."):initStarHeart(e.StarHeartPrefs.addStars,e.StarHeartPrefs.replaceStrings)}),window.onload=function(){isConfigPage()&&(document.getElementById("starheart-language").addEventListener("change",save),document.getElementById("twitter-txt").addEventListener("change",save),document.getElementById("tweetdeck-txt").addEventListener("change",save),document.getElementById("tweetdeck-refresh-rate").addEventListener("change",tdRefreshChange),document.getElementById("twitter-addstars").addEventListener("change",save),document.getElementById("tweetdeck-addstars").addEventListener("change",save),document.getElementById("hide-retweets-twitter").addEventListener("change",save),document.getElementById("hide-retweets-tweetdeck").addEventListener("change",save),document.getElementById("round-icons-twitter").addEventListener("change",save),document.getElementById("round-icons-tweetdeck").addEventListener("change",save),document.getElementById("remove-moments").addEventListener("change",save),document.getElementById("remove-who-to-follow").addEventListener("change",save),document.getElementById("remove-trends").addEventListener("change",save),document.getElementById("resetbutton").addEventListener("click",resetConfirmation),load())};
